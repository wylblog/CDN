<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, shrink-to-fit=no">
    <meta name="referrer" content="origin">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <title>
        
            01.Ubuntu基础配置(18.04)+Docker配置和使用+容器化centos7大数据环境准备
        
    </title>
    <link rel="shortcut icon" href="#"/>

    <link type="text/css" rel="stylesheet" href="/font/LongCang.css">
    <link type="text/css" rel="stylesheet" href="/font/Monda.css">
    <link type="text/css" rel="stylesheet" href="/font/NotoSansSC.css">
    <link type="text/css" rel="stylesheet" href="/font/NotoSerifSC.css">
    <link type="text/css" rel="stylesheet" href="/font/Playball.css">
    <link type="text/css" rel="stylesheet" href="/font/PTMono.css">
    <link type="text/css" rel="stylesheet" href="/font/Roboto.css">
    <link type="text/css" rel="stylesheet" href="/font/RobotoSlab.css">
    <link type="text/css" rel="stylesheet" href="/font/Rosario.css">
    <link type="text/css" rel="stylesheet" href="/font/UbuntuMono.css">

    <link type="text/css" rel="stylesheet" href="/css/base.css">
    <link type="text/css" rel="stylesheet" href="/css/code.css">

    <script type="text/javascript" src="/js/jquery-3.4.1.min.js"></script>
<meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <a id="cover"></a>
    <link type="text/css" rel="stylesheet" href="/css/post.css">
<div id="header" class="header">
    <div class="vertical">
        <div class="inner">
            
                <h1 class="header-subtitle">01.Ubuntu基础配置(18.04)+Docker配置和使用+容器化centos7大数据环境准备</h1>
                <div class="header-subinfo">
                    <p class="article-info-text">
                        <span>
                            <i class="iconfont icon-time"></i> 发表时间：2024-11-08
                        </span>
                        
                            
                                <span id="/2024/11/08/01-Ubuntu基础配置-18-04-Docker配置和使用-容器化centos7大数据环境准备/" class="leancloud_visitors" data-flag-title="01.Ubuntu基础配置(18.04)+Docker配置和使用+容器化centos7大数据环境准备">
                                    <i class="iconfont icon-browse"></i> 阅读：<sapn class="leancloud-visitors-count"></span>
                                </span>
                            
                            
                                <span>
                                    <i class="iconfont icon-interactive"></i> 评论：<span class="valine-comment-count" data-xid="/2024/11/08/01-Ubuntu基础配置-18-04-Docker配置和使用-容器化centos7大数据环境准备/"></span>
                                </span>
                              
                        
                    </p>
                    
                        
                            <span class="category-color">大数据系列</span>
                        
                    
                    
                        
                            <span class="tag-color">大数据运维</span>
                        
                    
                </div>
            
        </div>
    </div>
    
</div>
<div id="container">
    
        <!-- 文章页面 -->
        <div id="article">
            <div class="toc"></div>
            <div class="article-body">
                <h2 id="1-ubuntu-基础配置"><a href="#1-ubuntu-基础配置" class="headerlink" title="1.ubuntu 基础配置"></a>1.ubuntu 基础配置</h2><p>环境：<code>ubuntu 18.04</code></p>
<p>安装完Ubuntu之后，除了需要新建用户、设置密码之外，我们还要设置root密码，虽然Ubuntu默认有root超级管理员账户，但是具体的密码我们可以自行设置</p>
<h3 id="1-1设置root密码："><a href="#1-1设置root密码：" class="headerlink" title="1.1设置root密码："></a>1.1设置root密码：</h3><p>1.启动Ubuntu<br>启动Ubuntu，有图形界面的，启动终端即可</p>
<p>2.终端输入sudo passwd root</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd root</span><br></pre></td></tr></table></figure>

<p><img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202309241324207.png" alt="image-20230320172400074"></p>
<p>验证测试：</p>
<p>验证：输入<strong>su -</strong> 后输入超级管理员账户的密码</p>
<h3 id="1-2-更换源："><a href="#1-2-更换源：" class="headerlink" title="1.2 更换源："></a>1.2 更换源：</h3><p>更换下载源，不更换的话安装docker时会很慢，可以选择阿里或者清华源</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install vim </span><br><span class="line">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak		备份</span><br><span class="line">sudo vi /etc/apt/sources.list    #添加清华源</span><br></pre></td></tr></table></figure>

<p>清华源：</p>
<p><a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/">ubuntu | 镜像站使用帮助 | 清华大学开源软件镜像站 | Tsinghua Open Source Mirror</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span></span></span><br><span class="line"></span><br><span class="line">deb http://security.ubuntu.com/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">deb-src http://security.ubuntu.com/ubuntu/ bionic-security main restricted universe multiverse</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">预发布软件源，不建议启用</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">更新源</span></span><br><span class="line">sudo apt update</span><br></pre></td></tr></table></figure>

<h3 id="1-3-安装ssh服务："><a href="#1-3-安装ssh服务：" class="headerlink" title="1.3 安装ssh服务："></a>1.3 安装ssh服务：</h3><p>（方便连接xshell工具）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install openssh-server -y</span><br></pre></td></tr></table></figure>

<p>解决windows Ubuntu 之间复制粘贴问题：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get autoremove open-vm-tools -y	//卸载已有的工具</span><br><span class="line">sudo apt-get install open-vm-tools -y		//安装工具open-vm-tools</span><br><span class="line">sudo apt-get install open-vm-tools-desktop -y //安装open-vm-tools-desktop</span><br></pre></td></tr></table></figure>

<p>ubuntu下安装asbru-cm工具：</p>
<p>Asbru-CM是一种开源的配置管理工具，用于管理和部署服务器配置。它提供了一个Web界面，使用户可以轻松地管理和监控多台服务器的配置。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install curl -y</span><br><span class="line"></span><br><span class="line">curl -s https://packagecloud.io/install/repositories/asbru-cm/asbru-cm/script.deb.sh | sudo bash</span><br><span class="line"></span><br><span class="line">sudo apt install asbru-cm -y</span><br></pre></td></tr></table></figure>



<h2 id="2-Docker配置"><a href="#2-Docker配置" class="headerlink" title="2. Docker配置"></a>2. Docker配置</h2><p>因为某些原因,国内已经访问不了docker官网,所以此处改成使用阿里源安装docker</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/single_0910/article/details/120562065">Ubuntu18.04使用阿里源镜像安装Docker并配置镜像加速【图文详细】_阿里的ubuntu镜像源安装-CSDN博客</a></p>
<h3 id="2-1-如果之前安装过docker，卸载旧版本docker"><a href="#2-1-如果之前安装过docker，卸载旧版本docker" class="headerlink" title="2.1 如果之前安装过docker，卸载旧版本docker"></a>2.1 如果之前安装过docker，卸载旧版本docker</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove docker docker-engine docker.io containerd runc</span><br></pre></td></tr></table></figure>

<h3 id="2-2-更新及安装工具软件"><a href="#2-2-更新及安装工具软件" class="headerlink" title="2.2 更新及安装工具软件"></a>2.2 更新及安装工具软件</h3><h4 id="2-2-1-更新系统里的所有的能更新的软件"><a href="#2-2-1-更新系统里的所有的能更新的软件" class="headerlink" title="2.2.1 更新系统里的所有的能更新的软件"></a>2.2.1 更新系统里的所有的能更新的软件</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>

<h4 id="2-2-2-安装几个工具软件"><a href="#2-2-2-安装几个工具软件" class="headerlink" title="2.2.2 安装几个工具软件"></a>2.2.2 安装几个工具软件</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install apt-transport-https ca-certificates curl gnupg lsb-release -y</span><br></pre></td></tr></table></figure>

<h4 id="2-2-3-增加一个docker的官方GPG-key："><a href="#2-2-3-增加一个docker的官方GPG-key：" class="headerlink" title="2.2.3 增加一个docker的官方GPG key："></a>2.2.3 增加一个docker的官方GPG key：</h4><p>gpgkey：是用来验证软件的真伪 ——防伪的</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><br></pre></td></tr></table></figure>

<p>2.2.4 下载仓库文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo echo &quot;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg$(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br></pre></td></tr></table></figure>

<h3 id="2-3-安装docker"><a href="#2-3-安装docker" class="headerlink" title="2.3 安装docker"></a>2.3 安装docker</h3><h4 id="2-3-1-再次更新系统"><a href="#2-3-1-再次更新系统" class="headerlink" title="2.3.1 再次更新系统"></a>2.3.1 再次更新系统</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>

<h4 id="2-3-2-安装docker-ce软件"><a href="#2-3-2-安装docker-ce软件" class="headerlink" title="2.3.2 安装docker-ce软件"></a>2.3.2 安装docker-ce软件</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install docker-ce docker-ce-cli containerd.io -y</span><br></pre></td></tr></table></figure>

<h3 id="2-4-查看是否启动docker"><a href="#2-4-查看是否启动docker" class="headerlink" title="2.4 查看是否启动docker"></a>2.4 查看是否启动docker</h3><p>由于docker安装的时候自带设置启动，所以直接查看进程是否启动就可以了</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux|grep docker</span><br></pre></td></tr></table></figure>

<p><img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202309241324877.png" alt="image-20230812180124831"></p>
<p>安装成功</p>
<h2 id="3-Docker-服务操作"><a href="#3-Docker-服务操作" class="headerlink" title="3. Docker 服务操作"></a>3. Docker 服务操作</h2><h3 id="3-1-常用命令"><a href="#3-1-常用命令" class="headerlink" title="3.1 常用命令"></a>3.1 常用命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo service docker start  # 启动Docker</span><br><span class="line">sudo service docker stop  # 停止Docker</span><br><span class="line">sudo service docker restart  # 重启Docker</span><br><span class="line">sudo service docker status  # 查看Docker状态</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看docker容器</span></span><br><span class="line">docker ps    #查看当前运行的容器</span><br><span class="line">docker ps -a    #查看所有容器</span><br><span class="line">docker rm -f $(docker ps -aq)  #删除所有容器</span><br><span class="line">docker images  #查看docker镜像</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">导入镜像包,两者都会恢复为镜像</span></span><br><span class="line">docker load &lt; /home/hj/大数据比赛环境包/bigdata.tar</span><br><span class="line">docker load -i &lt; /home/hj/大数据比赛环境包/bigdata.tar</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">导入容器包,两者都会恢复为镜像</span></span><br><span class="line">docker import 路径</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除镜像（镜像有创建过容器则需要删除容器才可以删除镜像）</span></span><br><span class="line">docker rmi 镜像名或镜像ID</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除所有容器</span></span><br><span class="line">docker rm -f $(docker ps -aq)</span><br><span class="line">docker rm 容器</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动容器</span></span><br><span class="line">docker start 容器id</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">运行容器</span></span><br><span class="line">docker exec -it 容器id /bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将容器导成镜像</span></span><br><span class="line">sudo docker commit -a &quot;镜像作者&quot; -m &quot;提交成镜像的说明信息&quot; 容器的名称 新镜像名称:标签</span><br><span class="line"></span><br><span class="line">docker 上传文件到容器</span><br><span class="line">docker cp /home/hj/clickhouse-21.9.4.35（tgz） master:/opt/</span><br><span class="line"></span><br><span class="line">从容器中上传文件到本地</span><br><span class="line">docker cp master:/opt/ /home/hj</span><br></pre></td></tr></table></figure>

<h3 id="3-2-Docker-的镜像操作"><a href="#3-2-Docker-的镜像操作" class="headerlink" title="3.2 Docker 的镜像操作"></a>3.2 Docker 的镜像操作</h3><h4 id="3-2-1-列出镜像"><a href="#3-2-1-列出镜像" class="headerlink" title="3.2.1 列出镜像"></a>3.2.1 列出镜像</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<p>结果：<img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202309241324626.png" alt="image-20230812180956921"></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>REPOSITORY</td>
<td>镜像所在的仓库名称</td>
</tr>
<tr>
<td>TAG</td>
<td>镜像标签(版本)</td>
</tr>
<tr>
<td>IMAGEID</td>
<td>镜像ID</td>
</tr>
<tr>
<td>CREATED</td>
<td>镜像的创建日期(不是获取该镜像的日期)</td>
</tr>
<tr>
<td>SIZE</td>
<td>镜像大小</td>
</tr>
</tbody></table>
<h4 id="3-2-2-搜索镜像"><a href="#3-2-2-搜索镜像" class="headerlink" title="3.2.2 搜索镜像"></a>3.2.2 搜索镜像</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search 镜像名</span><br></pre></td></tr></table></figure>

<h4 id="3-2-3-拉取镜像"><a href="#3-2-3-拉取镜像" class="headerlink" title="3.2.3 拉取镜像"></a>3.2.3 拉取镜像</h4><p>要想获取某个镜像，我们可以使用pull命令，从仓库中拉取镜像到本地。</p>
<p>如果下载镜像时不指定标签，则默认会下载仓库中最新版本的镜像，即选择标签为 latest 标签。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull 仓库名称/标签</span><br></pre></td></tr></table></figure>

<h4 id="3-2-4-删除镜像"><a href="#3-2-4-删除镜像" class="headerlink" title="3.2.4 删除镜像"></a>3.2.4 删除镜像</h4><p>镜像有创建过容器则需要删除容器才可以删除镜像（或者直接强制删除）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">普通删除</span></span><br><span class="line">docker rmi 镜像名或镜像ID</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">强制删除</span></span><br><span class="line">docker rmi -f 镜像名或镜像ID</span><br></pre></td></tr></table></figure>

<h4 id="3-2-5-导入镜像"><a href="#3-2-5-导入镜像" class="headerlink" title="3.2.5 导入镜像"></a>3.2.5 导入镜像</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">方法1</span></span><br><span class="line">docker load &lt; 镜像包</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">方法2</span></span><br><span class="line">sudo docker load -i 镜像包</span><br></pre></td></tr></table></figure>

<h4 id="3-2-6-导出镜像"><a href="#3-2-6-导出镜像" class="headerlink" title="3.2.6 导出镜像"></a>3.2.6 导出镜像</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save –o /opt/导出名称.tar 镜像名称:标签</span><br></pre></td></tr></table></figure>

<h3 id="3-3-Docker容器操作"><a href="#3-3-Docker容器操作" class="headerlink" title="3.3 Docker容器操作"></a>3.3 Docker容器操作</h3><h4 id="3-3-1-创建容器"><a href="#3-3-1-创建容器" class="headerlink" title="3.3.1 创建容器"></a>3.3.1 创建容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run [option] 镜像名:tag [向启动容器中传入的命令]</span><br></pre></td></tr></table></figure>

<p> 常用可选参数说明：</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>意义</th>
</tr>
</thead>
<tbody><tr>
<td>-i</td>
<td>表示以“交互模式”运行容器</td>
</tr>
<tr>
<td>-t</td>
<td>表示容器启动后会进入其命令行。加入这两个参数后，容器创建就能登录进去。即分配一个伪终端。</td>
</tr>
<tr>
<td>–name</td>
<td>为创建的容器命名</td>
</tr>
<tr>
<td>-v</td>
<td>表示目录映射关系(前者是宿主机目录，后者是映射到宿主机上的目录，即 宿主机目录:容器中目录)，可以使用多个-v 做多个目录或文件映射。注意:最好做目录映射，在宿主机上做修改，然后 共享到容器上。</td>
</tr>
<tr>
<td>-d</td>
<td>在run后面加上-d参数,则会创建一个守护式容器在后台运行(这样创建容器后不 会自动登录容器，如果只加-i -t 两个参数，创建后就会自动进去容器)。</td>
</tr>
<tr>
<td>-p</td>
<td>表示端口映射，前者是宿主机端口，后者是容器内的映射端口。可以使用多个-p 做多个端口映射</td>
</tr>
<tr>
<td>-e</td>
<td>为容器设置环境变量</td>
</tr>
<tr>
<td>–network</td>
<td>指定网桥</td>
</tr>
</tbody></table>
<h4 id="3-3-2-进入已运行容器"><a href="#3-3-2-进入已运行容器" class="headerlink" title="3.3.2 进入已运行容器"></a>3.3.2 进入已运行容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it 容器名或容器ID /bin/bash</span><br></pre></td></tr></table></figure>

<h4 id="3-3-3-查看容器"><a href="#3-3-3-查看容器" class="headerlink" title="3.3.3 查看容器"></a>3.3.3 查看容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker ps     #查看当前运行的容器</span><br><span class="line">docker ps –a    #查看当前所有的容器</span><br></pre></td></tr></table></figure>

<h4 id="3-3-4-启动容器"><a href="#3-3-4-启动容器" class="headerlink" title="3.3.4 启动容器"></a>3.3.4 启动容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start 容器名或容器ID</span><br></pre></td></tr></table></figure>

<h4 id="3-3-5-停止容器"><a href="#3-3-5-停止容器" class="headerlink" title="3.3.5 停止容器"></a>3.3.5 停止容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop 容器名或容器ID</span><br></pre></td></tr></table></figure>

<h4 id="3-3-6-删除容器"><a href="#3-3-6-删除容器" class="headerlink" title="3.3.6 删除容器"></a>3.3.6 删除容器</h4><p>（运行中的容器不能删除）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm 容器名或容器ID </span><br></pre></td></tr></table></figure>

<h4 id="3-3-7-将容器保存为镜像"><a href="#3-3-7-将容器保存为镜像" class="headerlink" title="3.3.7 将容器保存为镜像"></a>3.3.7 将容器保存为镜像</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit [OPTIONS] CONTAINER [REPOSITORY]:[TAG]</span><br></pre></td></tr></table></figure>

<p>OPTIONS说明：</p>
<p>-a :提交的镜像作者；</p>
<p>-c :使用Dockerfile指令来创建镜像；</p>
<p>-m :提交时的说明文字；</p>
<p>-p :在commit时，将容器暂停。</p>
<p>$ docker commit 容器名 镜像名:tag</p>
<h3 id="3-4-docker网络设置"><a href="#3-4-docker网络设置" class="headerlink" title="3.4 docker网络设置"></a>3.4 docker网络设置</h3><h4 id="3-4-1-Docker基本网络"><a href="#3-4-1-Docker基本网络" class="headerlink" title="3.4.1 Docker基本网络"></a>3.4.1 Docker基本网络</h4><p><code>Docker安装后自动创建3种网络：bridge、host、none</code></p>
<p>Docker在启动时会开启一个虚拟网桥设备docker0，默认的地址为172.17.0.1&#x2F;16，容器启动后都会被桥接到docker0上，并自动分配到一个ip地址。</p>
<table>
<thead>
<tr>
<th align="left">bridge 桥接网络模式：</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1、为每一个容器分配、设置IP等，并将容器连接到一个docker0虚拟网桥，默认为该模式</td>
</tr>
<tr>
<td align="left">2、为容器分配独立IP，具有很好的网络隔离性，服务不会跟宿主机上的服务发送端口冲突问题</td>
</tr>
<tr>
<td align="left">3、主机和容器间通过桥接的方式进行通信</td>
</tr>
<tr>
<td align="left">4、只能单机使用，不适合跨主机docker服务间通信</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">host 主机本地网络模式：</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1、docker容器共享主机的ip、端口号等等网络资源，如果单机部署</td>
</tr>
<tr>
<td align="left">2、只能单机使用，不适合跨主机docker服务间通信</td>
</tr>
<tr>
<td align="left">3、这种网络模式效率最高</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">overlay 集群网络模式：</th>
</tr>
</thead>
<tbody><tr>
<td align="left">多节点集群下统一分配服务独立ip</td>
</tr>
<tr>
<td align="left">跨机器节点上的docker服务间能互相通信</td>
</tr>
<tr>
<td align="left">支持主机节点和集群网络内的节点间互相通信</td>
</tr>
<tr>
<td align="left">支持节点间加密通信 注：windows机器节点不支持加密通信</td>
</tr>
</tbody></table>
<p><code>添加网桥，创建容器时可以指定网桥，不使用默认网桥</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker network ls            #查看所有网络</span><br><span class="line">docker network inspect 网络   #查看网络的相关信息</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">自定义创建的默认default bridge</span>   </span><br><span class="line"></span><br><span class="line">docker network create --driver bridge --subnet 192.168.1.1/24 --gateway 192.168.1.1 mynet #自定义创建一个网络mynet</span><br><span class="line"></span><br><span class="line">docker network rm 网络id  #删除网络</span><br></pre></td></tr></table></figure>

<h2 id="4-Docker封装Centos7大数据环境"><a href="#4-Docker封装Centos7大数据环境" class="headerlink" title="4.Docker封装Centos7大数据环境"></a>4.Docker封装Centos7大数据环境</h2><h3 id="4-1-编写Dockerfile"><a href="#4-1-编写Dockerfile" class="headerlink" title="4.1 编写Dockerfile"></a>4.1 编写Dockerfile</h3><p>Pull一个centos7镜像，在此镜像基础上安装ssh服务，开放端口，上传jdk、hadoop等组件等操作，封装成hadoop大数据环境</p>
<blockquote>
<p>已经封装好的镜像:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">registry.cn-hangzhou.aliyuncs.com/shangguan-hj/bigdata:gxjzy</span><br></pre></td></tr></table></figure>

<p>拉取</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull registry.cn-hangzhou.aliyuncs.com/510_repo/bigdata:gxjzy</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="4-1-2-编写第一个dockerfile，封装一个新的镜像"><a href="#4-1-2-编写第一个dockerfile，封装一个新的镜像" class="headerlink" title="4.1.2 编写第一个dockerfile，封装一个新的镜像"></a>4.1.2 编写第一个dockerfile，封装一个新的镜像</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">选择一个已有的os镜像作为基础</span>  </span><br><span class="line">FROM centos:7</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装openssh-server和<span class="built_in">sudo</span>软件包</span>  </span><br><span class="line">RUN yum install -y --nogpgcheck openssh-server sudo</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装openssh-clients</span></span><br><span class="line">RUN yum install -y --nogpgcheck openssh-clients</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改ssh配置文件，方便后面通过root用户进行ssh远程登录</span></span><br><span class="line">RUN sed -i &#x27;s/ GSSAPIAuthentication yes /#GSSAPIAuthentication yes/g&#x27; /etc/ssh/sshd_config</span><br><span class="line">RUN sed -i &#x27;s/ GSSAPICleanupCredentials no /#GSSAPICleanupCredentials no/g&#x27; /etc/ssh/sshd_config</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装initscripts，方便 ip addr 查询网络状态</span></span><br><span class="line">RUN yum install -y --nogpgcheck initscripts</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装防火墙</span> </span><br><span class="line">RUN yum install firewalld -y</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装<span class="built_in">which</span>  hadoop版本号查看需要用到</span>  </span><br><span class="line">RUN yum install which -y</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">mysql 初始化报错 ，缺少libnuma.so.1情况，缺啥补啥</span> </span><br><span class="line">RUN yum install numactl -y</span><br><span class="line">RUN yum install libaio -y</span><br><span class="line">RUN yum install libnuma.so.1 -y</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加用户root，密码123，并且将此用户添加到sudoers里</span>  </span><br><span class="line">RUN echo &quot;root:123&quot; | chpasswd</span><br><span class="line">RUN echo &quot;root   ALL=(ALL)       ALL&quot; &gt;&gt; /etc/sudoers</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动sshd服务并且暴露22端口</span>  </span><br><span class="line">RUN mkdir /var/run/sshd</span><br><span class="line">EXPOSE 22</span><br><span class="line">CMD [&quot;/usr/sbin/sshd&quot;, &quot;-D&quot;]</span><br><span class="line">RUN mkdir /opt/&#123;software,module&#125;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">封装：docker build -t<span class="string">&quot;centos-ssh-root&quot;</span> .</span> </span><br></pre></td></tr></table></figure>

<p>编辑好脚本后，使用build命令开始运行</p>
<p>格式：docker build -t”镜像名称” . </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t&quot;centos-ssh-root&quot; .</span><br></pre></td></tr></table></figure>

<p>运行效果：<img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202309241324924.png" alt="image-20230812190933232"></p>
<p>查看创建的镜像：</p>
<p> <img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202309241324183.png" alt="image-20230812191126430"></p>
<h4 id="4-1-3-编写第二个Dockerfile，上传所需环境包，再次封装成一个新的镜像"><a href="#4-1-3-编写第二个Dockerfile，上传所需环境包，再次封装成一个新的镜像" class="headerlink" title="4.1.3 编写第二个Dockerfile，上传所需环境包，再次封装成一个新的镜像"></a>4.1.3 编写第二个Dockerfile，上传所需环境包，再次封装成一个新的镜像</h4><p>封装的系统只是完成了ssh服务的安装，开放22端口，配置root用户。并没有达到大数据环境的使用要求，接下来在这个封装好的系统上，再进行封装，上传大数据环境需要的组件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">软件包根据自己所需的填写</span></span><br><span class="line">FROM centos-ssh-root</span><br><span class="line">COPY apache-flume-1.9.0-bin.tar.gz /opt/software/</span><br><span class="line">COPY apache-hive-3.1.2-bin.tar.gz /opt/software/</span><br><span class="line">COPY flink-1.14.0-bin-scala_2.12.tgz /opt/software/</span><br><span class="line">COPY hadoop-3.1.3.tar.gz /opt/software/</span><br><span class="line">COPY hbase-2.2.3-bin.tar.gz /opt/software/</span><br><span class="line">COPY jdk-8u162-linux-x64.tar.gz /opt/software/</span><br><span class="line">COPY kafka_2.12-2.4.1.tgz /opt/software/</span><br><span class="line">COPY maxwell-1.29.0.tar.gz /opt/software/</span><br><span class="line">COPY redis-6.2.6.tar.gz /opt/software/</span><br><span class="line">COPY scala-2.12.0.tgz /opt/software/</span><br><span class="line">COPY spark-3.1.1-bin-hadoop3.2.tgz /opt/software/</span><br><span class="line">COPY clickhouse-21.9.4.35 /opt/software/</span><br><span class="line">COPY mysql /opt/software/</span><br><span class="line">COPY zookeeper-3.4.6.tar.gz /opt/software/</span><br><span class="line">COPY sqoop-1.4.2.bin__hadoop-2.0.0-alpha.tar.gz /opt/software/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">封装：docker build -t<span class="string">&quot;bigdata&quot;</span> .</span> </span><br></pre></td></tr></table></figure>

<p>编辑好脚本后，使用build命令开始运行</p>
<p>格式：docker build -t”镜像名称” . </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t&quot;bigdata&quot; .</span><br></pre></td></tr></table></figure>

<p>运行效果：<img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202309241324473.png" alt="image-20230812191358805"></p>
<p>查看新封装的镜像：</p>
<p><img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202309241324220.png" alt="image-20230812192151801"></p>
<h4 id="4-1-4-star-镜像优化"><a href="#4-1-4-star-镜像优化" class="headerlink" title="4.1.4 :star:镜像优化"></a>4.1.4 :star:镜像优化</h4><blockquote>
<p>综合上面两个dockerfile进行镜像优化</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">FROM centos:7</span><br><span class="line">RUN yum install -y --nogpgcheck openssh-server <span class="built_in">sudo</span> &amp;&amp; \</span><br><span class="line">    yum install -y --nogpgcheck openssh-clients &amp;&amp; \</span><br><span class="line">    sed -i <span class="string">&#x27;s/ GSSAPIAuthentication yes /#GSSAPIAuthentication yes/g&#x27;</span> /etc/ssh/sshd_config &amp;&amp; \</span><br><span class="line">    sed -i <span class="string">&#x27;s/ GSSAPICleanupCredentials no /#GSSAPICleanupCredentials no/g&#x27;</span> /etc/ssh/sshd_config &amp;&amp; \</span><br><span class="line">    yum install -y --nogpgcheck initscripts &amp;&amp; \</span><br><span class="line">    yum install <span class="built_in">which</span> -y &amp;&amp; \</span><br><span class="line">    yum install numactl libaio libnuma.so.1 -y &amp;&amp; \</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;root:1&quot;</span> | chpasswd &amp;&amp; \</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;root   ALL=(ALL)       ALL&quot;</span> &gt;&gt; /etc/sudoers &amp;&amp; \</span><br><span class="line">    <span class="built_in">mkdir</span> /var/run/sshd &amp;&amp; \</span><br><span class="line">    <span class="built_in">mkdir</span> /opt/&#123;software,module&#125; </span><br><span class="line">COPY . /opt/software </span><br><span class="line">EXPOSE 22</span><br><span class="line">CMD [<span class="string">&quot;/usr/sbin/sshd&quot;</span>, <span class="string">&quot;-D&quot;</span>]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>开始构建</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@docker-server ~/bigdata]# docker build -t bigdata .</span><br></pre></td></tr></table></figure>

<blockquote>
<p>查看构建的镜像</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@docker-server ~/bigdata]# docker images | grep bigdata</span><br><span class="line">bigdata                                                  latest    78d3e81ed5ac   4 hours ago   5.57GB</span><br></pre></td></tr></table></figure>



<h3 id="4-2-Hadoop配置容器启动："><a href="#4-2-Hadoop配置容器启动：" class="headerlink" title="4.2 Hadoop配置容器启动："></a>4.2 Hadoop配置容器启动：</h3><p><strong>集群规划，一主两从</strong></p>
<blockquote>
<p>master:</p>
</blockquote>
<p>测试:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -id --name master --hostname master --net mynet --privileged=true -v /sys/fs/cgroup:/sys/fs/cgroup -P -p 50070:50070 -p 8088:8088 bigdata /usr/sbin/init</span><br></pre></td></tr></table></figure>

<p>:star: 实战:</p>
<p>自定义创建docker网络:</p>
<p>(这会创建一个自定义网络，允许在该网络内分配IP地址，并且子网为<code>192.168.1.0/24</code>)</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker network create --subnet=192.168.1.0/24 mynet</span><br></pre></td></tr></table></figure>

<p>创建一个名为master的容器,ip为192.168.1.10:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker run -d --privileged --name master --hostname master --network mynet --ip 192.168.1.10 \</span><br><span class="line">  -p 16010:16010 -p 2181:2181 -p 3306:3306 -p 6379:6379 -p 8031:8031 -p 8032:8032 \</span><br><span class="line">  -p 8033:8033 -p 8080:8080 -p 8081:8081 -p 8020:8020 -p 8088:8088 -p 8123:8123 \</span><br><span class="line">  -p 9000:9000 -p 9083:9083 -p 9092:9092 -p 9866:9866 -p 9870:9870 -p 10000:10000 \</span><br><span class="line">  -p 60010:60010 -p 12321:12321 -p 4040:4040 \</span><br><span class="line">  -v /sys/fs/cgroup:/sys/fs/cgroup \</span><br><span class="line">  bigdata:gxjzy /usr/sbin/init</span><br></pre></td></tr></table></figure>



<blockquote>
<p>slave1:</p>
</blockquote>
<p>测试:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -id --name slave1 --hostname slave1 --net mynet --privileged=true -P bigdata /usr/sbin/init</span><br></pre></td></tr></table></figure>

<p>:star: 实战:</p>
<p>创建一个名为master的容器,ip为192.168.1.10:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker run -d --privileged --name slave1 --hostname slave1 --network mynet --ip 192.168.1.20 \</span><br><span class="line">  -v /sys/fs/cgroup:/sys/fs/cgroup \</span><br><span class="line">  bigdata:gxjzy /usr/sbin/init</span><br></pre></td></tr></table></figure>





<blockquote>
<p>slave2:</p>
</blockquote>
<p>测试:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -id --name slave2 --hostname slave2 --net mynet --privileged=true -P bigdata /usr/sbin/init</span><br></pre></td></tr></table></figure>

<p>:star: 实战:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker run -d --privileged --name slave2 --hostname slave2 --network mynet --ip 192.168.1.30 \</span><br><span class="line">  -v /sys/fs/cgroup:/sys/fs/cgroup \</span><br><span class="line">  bigdata:gxjzy /usr/sbin/init</span><br></pre></td></tr></table></figure>

<p>查看创建情况：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure>

<p><img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202401080117475.png" alt="image-20240108011713901"></p>
<p>iptables端口映射（略）(后续添加端口映射需要使用)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">iptables -t nat -vnL  #查看端口映射</span><br><span class="line"></span><br><span class="line">iptables -t nat -A DOCKER -p tcp --dport 8089 -j DNAT --to-destination 192.168.12.10:8088  #添加端口映射</span><br><span class="line"></span><br><span class="line">iptables -t nat -vnL DOCKER --line-number #显示端口行号</span><br><span class="line"></span><br><span class="line">iptables -t nat -D DOCKER &#123;行号&#125;  #删除规则</span><br></pre></td></tr></table></figure>

<p>进入容器：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it master bash</span><br></pre></td></tr></table></figure>

<h2 id="5-使用docker-compose编排工具快速建立基础环境"><a href="#5-使用docker-compose编排工具快速建立基础环境" class="headerlink" title="5. 使用docker-compose编排工具快速建立基础环境"></a>5. 使用docker-compose编排工具快速建立基础环境</h2><blockquote>
<p>首先安装好docker-compose编排工具(略)</p>
</blockquote>
<h3 id="5-1-编写docker-compose-yml"><a href="#5-1-编写docker-compose-yml" class="headerlink" title="5.1 编写docker-compose.yml"></a>5.1 编写docker-compose.yml</h3><p>自定义容器ip:</p>
<table>
<thead>
<tr>
<th>容器</th>
<th>ip</th>
</tr>
</thead>
<tbody><tr>
<td>master</td>
<td>192.168.1.10</td>
</tr>
<tr>
<td>slave1</td>
<td>192.168.1.20</td>
</tr>
<tr>
<td>slave2</td>
<td>192.168.1.30</td>
</tr>
</tbody></table>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@docker-server ~/bigdata-work]# vim docker-compose.yml </span><br></pre></td></tr></table></figure>

<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;2.2&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">master:</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">registry.cn-hangzhou.aliyuncs.com/shangguan-hj/bigdata:gxjzy</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">master</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">master</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="attr">mynet:</span></span><br><span class="line">        <span class="attr">ipv4_address:</span> <span class="string">&quot;192.168.1.10&quot;</span></span><br><span class="line">    <span class="attr">privileged:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">1022</span><span class="string">:22</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">50070</span><span class="string">:50070</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8088</span><span class="string">:8088</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/sys/fs/cgroup:/sys/fs/cgroup</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">/usr/sbin/init</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">slave1:</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">registry.cn-hangzhou.aliyuncs.com/shangguan-hj/bigdata:gxjzy</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">slave1</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">slave1</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="attr">mynet:</span></span><br><span class="line">        <span class="attr">ipv4_address:</span> <span class="string">&quot;192.168.1.20&quot;</span></span><br><span class="line">    <span class="attr">privileged:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">1023</span><span class="string">:22</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/sys/fs/cgroup:/sys/fs/cgroup</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">/usr/sbin/init</span></span><br><span class="line">    </span><br><span class="line">  <span class="attr">slave2:</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">registry.cn-hangzhou.aliyuncs.com/shangguan-hj/bigdata:gxjzy</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">slave2</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">slave2</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="attr">mynet:</span></span><br><span class="line">        <span class="attr">ipv4_address:</span> <span class="string">&quot;192.168.1.30&quot;</span></span><br><span class="line">    <span class="attr">privileged:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">1024</span><span class="string">:22</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/sys/fs/cgroup:/sys/fs/cgroup</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">/usr/sbin/init</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接外部网络</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">mynet:</span></span><br><span class="line">    <span class="attr">ipam:</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">subnet:</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.0</span><span class="string">/24</span></span><br></pre></td></tr></table></figure>

<h3 id="5-2-启动docker容器"><a href="#5-2-启动docker容器" class="headerlink" title="5.2 启动docker容器"></a>5.2 启动docker容器</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@docker-server ~/bigdata-work]# docker-compose up -d</span><br></pre></td></tr></table></figure>

<p><img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202312111500849.png" alt="image-20231211150006708"></p>
<h3 id="5-3-查看创建情况"><a href="#5-3-查看创建情况" class="headerlink" title="5.3 查看创建情况"></a>5.3 查看创建情况</h3><h4 id="5-3-1-方式一-了解"><a href="#5-3-1-方式一-了解" class="headerlink" title="5.3.1 方式一(了解):"></a>5.3.1 方式一(了解):</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@docker-server ~/bigdata-work]# docker-compose ps</span><br></pre></td></tr></table></figure>

<p><img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202312111501626.png" alt="image-20231211150148532"></p>
<h4 id="5-3-2-方式二"><a href="#5-3-2-方式二" class="headerlink" title="5.3.2 方式二:"></a>5.3.2 方式二:</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@docker-server ~/bigdata-work]# docker ps</span><br></pre></td></tr></table></figure>

<p><img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202312111502108.png" alt="image-20231211150204022"></p>
<h3 id="5-4-进入容器"><a href="#5-4-进入容器" class="headerlink" title="5.4 进入容器"></a>5.4 进入容器</h3><p><strong>master:</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@docker-server ~/bigdata-work]# docker <span class="built_in">exec</span> -it master bash</span><br><span class="line">[root@master /]# ip a</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">96: eth0@if97: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default </span><br><span class="line">    <span class="built_in">link</span>/ether 02:42:c0:a8:01:02 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span><br><span class="line">    inet 192.168.1.2/24 brd 192.168.1.255 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">[root@master /]# </span><br></pre></td></tr></table></figure>

<p><strong>slave1:</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@docker-server ~/bigdata-work]# docker <span class="built_in">exec</span> -it slave1 bash</span><br><span class="line">[root@slave1 /]# ip a</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">34: eth0@if35: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default </span><br><span class="line">    <span class="built_in">link</span>/ether 02:42:c0:a8:01:04 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span><br><span class="line">    inet 192.168.1.4/24 brd 192.168.1.255 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">[root@slave1 /]# </span><br></pre></td></tr></table></figure>

<p><strong>slave2:</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@docker-server ~/bigdata-work]# docker <span class="built_in">exec</span> -it slave2 bash</span><br><span class="line">[root@slave2 /]# ip a</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">32: eth0@if33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default </span><br><span class="line">    <span class="built_in">link</span>/ether 02:42:c0:a8:01:03 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span><br><span class="line">    inet 192.168.1.3/24 brd 192.168.1.255 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">[root@slave2 /]# </span><br></pre></td></tr></table></figure>



<h3 id="5-5-连接客户端工具xshell"><a href="#5-5-连接客户端工具xshell" class="headerlink" title="5.5 连接客户端工具xshell"></a>5.5 连接客户端工具xshell</h3><p>&#x3D;&#x3D;注意定义的ssh端口&#x3D;&#x3D;</p>
<blockquote>
<p>master</p>
</blockquote>
<p><img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202312111517302.png"></p>
<p><img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202312111515957.png" alt="image-20231211151542886"></p>
<blockquote>
<p>slave1</p>
</blockquote>
<p><img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202312111516827.png" alt="image-20231211151638743"></p>
<p><img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202312111516374.png" alt="image-20231211151651296"></p>
<blockquote>
<p>slave2</p>
</blockquote>
<p><img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202312111518533.png" alt="image-20231211151809445"></p>
<p><img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202312111518365.png" alt="image-20231211151826289"></p>
<p>完成</p>
<h2 id="6-asbru-cm工具的使用"><a href="#6-asbru-cm工具的使用" class="headerlink" title="6. asbru-cm工具的使用"></a>6. asbru-cm工具的使用</h2><p>1、</p>
<p><img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202401080134495.png" alt="image-20230320175907854"></p>
<p>2、</p>
<p><img src="https://hj-typora-images-1319512400.cos.ap-guangzhou.myqcloud.com/images/202401080134744.png" alt="image-20230320180309740"></p>

                
                <p class="end">__END__</p>
            </div>
            <div class="article-footer">
                <div class="suffix-box">
    <div class="suffix-box-left">
        <img src="/image/sidebar/avatar_wyl.jpg" alt="wylblog">
    </div>
    <div class="suffix-box-right">
        <span class="suffix-box-title">文章作者：</span>wylblog
        <br>
        <span class="suffix-box-title">文章出处：</span><a href="/2024/11/08/01-Ubuntu%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE-18-04-Docker%E9%85%8D%E7%BD%AE%E5%92%8C%E4%BD%BF%E7%94%A8-%E5%AE%B9%E5%99%A8%E5%8C%96centos7%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/" target="_blank">01.Ubuntu基础配置(18.04)+Docker配置和使用+容器化centos7大数据环境准备</a>
        <br>
        <span class="suffix-box-title">作者签名：</span>简单地活着, 肆意又精彩.
        <br>
        <span class="suffix-box-title">关于主题：</span><a href="https://github.com/first19326/Hexo-LiveForCode" target="_blank">Hexo - Live For Code</a>
        <br>
        <span class="suffix-box-title">版权声明：</span>文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" title="BY-NC-SA" target="_blank">BY-NC-SA</a> 许可协议，转载请注明出处
        <br>
    </div>
    <div style="clear: both;"></div>
</div>
                
                    <div class="category">
                        分类：
                        
                            <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%B3%BB%E5%88%97/">大数据系列</a>
                        
                    </div>
                
                
                    <div class="tag">
                        标签：
                        
                            <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE%E8%BF%90%E7%BB%B4/">大数据运维</a>
                        
                    </div>
                
                <div class="article-prev-next">
                    
                        <a href="/2024/11/08/02-1-Hadoop-3-1-3%E9%83%A8%E7%BD%B2%E6%B1%87%E6%80%BB/" class="prev-prefix">« </a> 上一篇：    <a href="/2024/11/08/02-1-Hadoop-3-1-3%E9%83%A8%E7%BD%B2%E6%B1%87%E6%80%BB/" title="发布于 2024-11-08 03:06">02.1 Hadoop-3.1.3部署汇总</a>
                        <br>
                    
                    
                        <a href="/2024/11/08/hello-world/" class="next-prefix">» </a> 下一篇：    <a href="/2024/11/08/hello-world/" title="发布于 2024-11-08 12:27">Hello World</a>
                    
                </div>
            </div>
            
    <div class="article-comments">
        
            <div class="comments-title">
                评论列表
            </div>
        
        <div class="comments-content"></div>
    </div>
    
 
        </div>
    
</div>
    <div id="footer">
    <div><span class='face'>ღゝ◡╹)ノ♡</span></div><div>【人生若只如初见<span><i class='iconfont icon-like-fill'></i></span>何事秋风悲画扇】</div><div>&copy; 2020-2023 WorstOne. All Rights Reserved.</div>
</div>
    <div id="sidebar">
    <div class="menu-wrap" style="display:none;">
        
            <div class="menu-notice">
                <span class="iconfont icon-notice"></span>
                <div class="notice">
                    <span>简单地活着，肆意而又精彩！</span>
                </div>
            </div>
        
        <nav class="menu">
            <div class="menu-introduce"> 
                <div class="introduce-avatar">
                    <img src="/image/sidebar/avatar_wyl.jpg">
                </div> 
                <div class="introduce-info"> 
                    <div class="introduce-user">
                        
                            <a href="https://devwyl1013.github.io" target="_blank"><span>wylblog</span></a>
                        
                    </div>
                </div> 
            </div> 
            <div class="menu-list">
                <ul>
                    
                        <li class=""><a href="/" class="" target="_self"><span class="iconfont icon-home-fill"></span>首页</a></li>
                    
                        <li class=""><a href="/category" class="" target="_self"><span class="iconfont icon-folder-fill"></span>分类</a></li>
                    
                        <li class=""><a href="/tag" class="" target="_self"><span class="iconfont icon-discount-fill"></span>标签</a></li>
                    
                        <li class=""><a href="/archives" class="" target="_self"><span class="iconfont icon-calendar-fill"></span>归档</a></li>
                    
                        <li class=""><a href="/about" class="" target="_self"><span class="iconfont icon-about-fill"></span>关于</a></li>
                    
                        <li class=""><a href="/comment" class="" target="_self"><span class="iconfont icon-comments-fill"></span>留言板</a></li>
                    
                        <li class=""><a href="/friend" class="" target="_self"><span class="iconfont icon-link"></span>友情链接</a></li>
                    
                </ul> 
            </div> 
            <div class="menu-link">
                <div class="box">
                    <div class="image-box"></div>
                </div>
                
                    <a name="gitee" href="https://gitee.com/master_hj" class="" target="_blank" data=""><span class="iconfont icon-gitee"></span></a>
                
                    <a name="微博" href="https://m.weibo.cn/u/5566622835?t=0&luicode=10000011&lfid=231583" class="" target="_blank" data=""><span class="iconfont icon-weibo"></span></a>
                
                    <a name="QQ" href="javascript:;" class="image" target="_self" data="/image/sidebar/qq.jpg"><span class="iconfont icon-qq"></span></a>
                
                    <a name="微信" href="javascript:;" class="image" target="_self" data="/image/sidebar/wx.jpg"><span class="iconfont icon-wechat"></span></a>
                
                    <a name="GitHub" href="https://github.com/wylblog" class="" target="_blank" data=""><span class="iconfont icon-github"></span></a>
                
            </div> 
        </nav>
        <button class="menu-button-close"></button>
        <div class="morph-shape" id="morph-shape" data-morph-open="M-7.312,0H15c0,0,66,113.339,66,399.5C81,664.006,15,800,15,800H-7.312V0z;M-7.312,0H100c0,0,0,113.839,0,400c0,264.506,0,400,0,400H-7.312V0z">
            <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 100 800" preserveAspectRatio="none">
                <path d="M-7.312,0H0c0,0,0,113.839,0,400c0,264.506,0,400,0,400h-7.312V0z"/>
            </svg>
        </div>
    </div>
    <button class="menu-button-open">MENU</button>
    <div class="menu-cover"></div>
</div>
    <link type="text/css" rel="stylesheet" href="/css/search.css">
<script type="text/javascript" src="/js/iscroll.js"></script>
<script type="text/javascript" src="/js/instantsearch.min.js"></script>
<div class="search-window">
    <div class="search-content">
        <div class="search-content-icon">
            <i class="iconfont icon-search"></i>
        </div>
        <div id="search-input" class="search-input"></div>
    </div>

    <div class="search-scroll">
        <div class="search-result">
            <div id="search-stats" class="search-stats"></div>
            <div id="search-hits"></div>
            <div id="search-pagination" class="search-pagination"></div>
        </div>
    </div>

    <span class="search-close-icon">
        <i class="iconfont icon-close"></i>
    </span>
</div>
    <div id="tools">
    <div class="progressbar-top"></div>
    
    <link type="text/css" rel="stylesheet" href="/css/APlayer.css">
    <script type="text/javascript" src="/js/APlayer.min.js"></script>
    <script type="text/javascript" src="/js/Meting.min.js"></script>
    <script>
        var meting_api = 'https://api.i-meto.com/meting/api?server=:server&type=:type&id=:id&auth=:auth&r=:r';
    </script>
    <meting-js id="3778678" lrcshow="false" server="netease" type="playlist" fixed="true" autoplay="false" loop="all" order="random" preload="auto" volume="0.67" mutex="true"></meting-js>

    <div class="wrap-right">
    <div class="wrap-right-hide">
         <div class="wrap-right-button favorites">
            <div class="iconbox" switch="false">
                <span class="iconfont icon-favorites"></span>
            </div>
            <span class="icontext">关注</span>
         </div>
        <div class="wrap-right-button search">
            <div class="iconbox">
                <span class="iconfont icon-search-menu"></span>
            </div>
            <span class="icontext">搜索</span>
        </div>
        <div class="wrap-right-button menu-button">
            <div class="iconbox">
                <span class="iconfont icon-menu"></span>
            </div>
            <span class="icontext">菜单</span>
        </div>
        <div class="wrap-right-button mode">
            <div class="light">
                <div class="iconbox">
                    <span class="iconfont icon-daymode"></span>
                </div>
                <span class="icontext">浅色模式</span>
            </div>
            <div class="dark">
                <div class="iconbox">
                    <span class="iconfont icon-nightmode-fill"></span>
                </div>
                <span class="icontext">深色模式</span>
            </div>
        </div>
        <div class="wrap-right-button bottom">
            <div class="iconbox">
                <span class="iconfont icon-top"></span>
            </div>
            <span class="icontext">跳至底部</span>
        </div>
    </div>
    <div class="wrap-right-show">
        <div class="wrap-right-button set">
            <div class="iconbox">
                <span class="iconfont icon-setting"></span>
            </div>
            <span class="icontext">设置</span>
        </div>
        <div class="wrap-right-button top">
            <div class="iconbox">
                <span class="iconfont icon-top"></span>
            </div>
            <span class="icontext">返回顶部</span>
        </div>
    </div>
</div>
    <div class="loading"></div>
</div>
    <script>
    window.config = {
        GitHubUserName     : "wylblog",
        GitHubRepositories : "無以菱的博客",

        User             : "wylblog",
        UserAvatar       : "/image/sidebar/avatar_wyl.jpg",
        WebsiteStartDate : "2020-10-13",
        Home             : "https://devwyl1013.github.io",

        WebsiteTitleBlur         : "(◍´꒳`◍) Hi, 期待你的到来",
        WebsiteTitleBlurTimeOut  : 500,
        WebsiteTitleFocus        : "(*´∇｀*) 欢迎回来!",
        WebsiteTitleFocusTimeOut : 1000,
        WebsiteFavicon           : {
            light : "/image/website/logo/logo.png",
            dark  : "/image/website/logo/logo-dark.png"
        },

        ProgressBar : {
            id       : "topProgressBar",
            color    : "#77B6FF",
            height   : "2px",
            duration : 0.2
        },

        Loading: {
            rebound : {
                tension  : 16,
                friction : 5
            },
            spinner : {
                id     : "spinner",
                radius : 90,
                sides  : 3,
                depth  : 4,
                colors : {
                    background : "#F0F0F0",
                    stroke     : "#272633",
                    base       : "",
                    child      : "#272633"
                },
                alwaysForward : true,
                restAt        : 0.5,
                renderBase    : false
            }
        },

        HomeHeaderAnimationRendered : true,
        HomeHeaderAnimation         : {
            radius      : 15,
            density     : 0.2,
            color       : "rgba(255, 255, 255, .2)",
            clearOffset : 0.3
        },

        BackAnimationRendered          : true,
        IEBrowserBackAnimationRendered : false,
        BackAnimation                  : {
            colorSaturation  : "60%",
            colorBrightness  : "50%",
            colorAlpha       : 0.5,
            colorCycleSpeed  : 5,
            verticalPosition : "random",
            horizontalSpeed  : 200,
            ribbonCount      : 3,
            strokeSize       : 0,
            parallaxAmount   : -0.2,
            animateSections  : true
        },

        HomeHeaderImage : [
            
                "/image/header/home_v1.jpg",
            
                "/image/header/home_v2.jpg",
            
                "/image/header/home_v3.jpg",
            
        ],
        HomeBannerText  : "",

        ArticleHeaderImage : [
            
                "/image/header/article_v1.jpg",
            
                "/image/header/article_v2.jpg",
            
        ],

        OtherBannerText : "",

        Error : {
            icon    : "icon-swimming",
            title   : "PAGE NOT FOUND",
            content : [
                
                    "很抱歉，您访问的页面不存在！",
                
                    "可能是输入地址有误或该地址已变更。",
                
            ],
            buttons : [
                
                    {
                        icon  : "icon-home",
                        text  : "返回首页",
                        href  : "/",
                        class : ""
                    },
                
            ]
        },

        MenuNotice : {
            enable : true,
            notice : "简单地活着，肆意而又精彩！",
            speed  : 20
        },
        MenuList : [
            
                {
                    name   : "首页",
                    icon   : "icon-home-fill",
                    href   : "/",
                    type   : "index",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "分类",
                    icon   : "icon-folder-fill",
                    href   : "/category",
                    type   : "category",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "标签",
                    icon   : "icon-discount-fill",
                    href   : "/tag",
                    type   : "tag",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "归档",
                    icon   : "icon-calendar-fill",
                    href   : "/archives",
                    type   : "archives",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "关于",
                    icon   : "icon-about-fill",
                    href   : "/about",
                    type   : "about",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "留言板",
                    icon   : "icon-comments-fill",
                    href   : "/comment",
                    type   : "comment",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "友情链接",
                    icon   : "icon-link",
                    href   : "/friend",
                    type   : "friend",
                    class  : "",
                    target : "_self"
                },
            
        ],
        MenuLink : [
            
                
                    {
                        name   : "gitee",
                        icon   : "icon-gitee",
                        href   : "https://gitee.com/master_hj",
                        class  : "",
                        target : "_blank",
                        image  : ""
                    },
                
                    {
                        name   : "微博",
                        icon   : "icon-weibo",
                        href   : "https://m.weibo.cn/u/5566622835?t=0&luicode=10000011&lfid=231583",
                        class  : "",
                        target : "_blank",
                        image  : ""
                    },
                
                    {
                        name   : "QQ",
                        icon   : "icon-qq",
                        href   : "javascript:;",
                        class  : "image",
                        target : "_self",
                        image  : "/image/sidebar/qq.jpg"
                    },
                
                    {
                        name   : "微信",
                        icon   : "icon-wechat",
                        href   : "javascript:;",
                        class  : "image",
                        target : "_self",
                        image  : "/image/sidebar/wx.jpg"
                    },
                
                    {
                        name   : "GitHub",
                        icon   : "icon-github",
                        href   : "https://github.com/wylblog",
                        class  : "",
                        target : "_blank",
                        image  : ""
                    },
                
            
        ],

        FooterStyle : 2,
        BottomText  : "<div><span class='face'>ღゝ◡╹)ノ♡</span></div><div>【人生若只如初见<span><i class='iconfont icon-like-fill'></i></span>何事秋风悲画扇】</div><div>&copy; 2020-2023 WorstOne. All Rights Reserved.</div>",

        ConsoleList : [
            
                
                    [
                        
                            
                                "Based on cnblogs theme SimpleMemory.",
                            
                                "",
                            
                        
                    ],
                
                    [
                        
                            
                                "SimpleMemory Author:",
                            
                                "BNDong",
                            
                        
                    ],
                
                    [
                        
                            
                                "Theme:",
                            
                                "LiveForCode",
                            
                        
                    ],
                
            
        ],

        FontIconExtend : "",

        Donate : {
            paypal  : "",
            bitcoin : "",
            alipay  : "/image/donate/alipay.png",
            wechat  : "/image/donate/wechat.png"
        },

        Search : {
            applicationID : "010C3EANT8",
            apiKey        : "c7abab9f11b79102b9aff7fe6d41447d",
            indexName     : "Notes",
            hits          : {
                page : 10
            },
            labels        : {
                placeholder : "搜索",
                empty       : "未发现与 「${query}」 相关的内容",
                stats       : "${hits} 条相关条目，使用了 ${time} 毫秒",
            }
        }, 

        Comment : {
            switch : true,
            type   : "Valine",
        },

        Waline : {
            el              : ".comments-content",
            serverURL       : "",
            path            : window.location.pathname,
            meta            : "['nick', 'mail', 'link']",
            requiredMeta    : "['nick', 'mail']",
            pageSize        : 10,
            lang            : "zh-cn",
            locale: {
                admin       : "博主",
                anonymous   : "匿名用户",
                sofa        : "快来做第一个评论的人吧 ~",
                placeholder : "你是我一生只会遇见一次的惊喜...",
            },
            dark            : "html[color-scheme='dark']",
            search          : false,
            pageview        : true,
            comment         : true,
            copyright       : false,
        },

        Valine : {
            el             : ".comments-content",
            appId          : "srhKtvWPQTWYKh3qX8G8M7v0-gzGzoHsz",
            appKey         : "8uVSP1q6UlALVC5igYfIfv2h",
            serverURLs     : "",
            placeholder    : "你是我一生只会遇见一次的惊喜...",
            avatar         : "mm",
            meta           : "nick,mail,link",
            requiredFields : "nick,mail",
            pageSize       : 5,
            lang           : "zh-cn",
            visitor        : true,
            enableQQ       : true
        },

        Tocbot : {
            switch                : true,
            tocSelector           : ".toc",
            contentSelector       : ".article-body",
            headingSelector       : "h1, h2, h3, h4, h5",
            headingsOffset        : 0,
            scrollSmooth          : true,
            scrollSmoothOffset    : -5,
            positionFixedSelector : ".toc",
            positionFixedClass    : "toc-fixed",
            fixedSidebarOffset    : "",
        },

        Require : {
            baseUrl     : "/js/",
            waitSeconds : 100
        },

        Music : {
            type : "Meting"
        },
        APlayer : {
            container : ".aplayer",
            fixed     : true,
            autoplay  : false,
            loop      : "all",
            order     : "random",
            preload   : "auto",
            volume    : 0.67,
            mutex     : true,
            lrcType   : 3,
            audio     : [
                
                    {
                        name   : "Endless Tears",
                        artist : "CLIFF EDGE",
                        cover  : "/music/cover/Endless Tears.jpg",
                        url    : "/music/song/Endless Tears.mp3",
                        lrc    : "/music/lrc/Endless Tears.lrc"
                    },
                
            ]
        },
        Meting : {
            api      : "https://api.i-meto.com/meting/api",
            id       : "3778678", 
            lrcshow  : false, 
            server   : "netease", 
            type     : "playlist", 
            fixed    : true, 
            autoplay : false, 
            loop     : "all", 
            order    : "random", 
            preload  : "auto", 
            volume   : 0.67, 
            mutex    : true
        },

        Mouse : {
            enable  : true,
            options : {
                size  : 6,
                sizeF : 24
            }
        },

        LazyLoad : {
            default : "/image/website/lazyload.svg"
        },
  
        Style : {
            aplayer          : "/css/APlayer.css",
            archive          : "/css/archive.css",
            base             : "/css/base.css",
            clipboard        : "/css/clipboard.css",
            code             : "/css/code.css",
            donate           : "/css/donate.css",
            fancybox         : "/css/jquery.fancybox.css",
            footer           : "/css/footer.css",
            iconfont         : "/iconfont/iconfont.css",
            index            : "/css/index.css",
            menuBubble       : "/css/menu-bubble.css",
            mouse            : "/css/mouse.css",
            page             : "/css/page.css",
            post             : "/css/post.css",
            search           : "/css/search.css",
            tocbot           : "/css/tocbot.css",
            valine           : "/css/valine.css",
            waline           : "/css/waline.css",
            walineCustom     : "/css/waline-custom.css"
        },

        Script: {
            aplayer          : "/js/APlayer.min.js",
            config           : "/js/require.config.js",
            index            : "/js/index.js",
            instantSearch    : "/js/instantsearch.min.js",
            iscroll          : "/js/iscroll.js",
            jQuery           : "/js/jquery-3.4.1.min.js",
            loading          : "/js/loading.js",
            meting           : "/js/Meting.min.js",
            require          : "/js/require.min.js",
            waline           : "/js/waline.mjs",
            pageview         : "/js/pageview.mjs",
            comment          : "/js/comment.mjs",
        },

        Font: {
            LongCang    : "/font/LongCang.css",
            Monda       : "/font/Monda.css",
            NotoSansSC  : "/font/NotoSansSC.css",
            NotoSerifSC : "/font/NotoSerifSC.css",
            Playball    : "/font/Playball.css",
            PTMono      : "/font/PTMono.css",
            Roboto      : "/font/Roboto.css",
            RobotoSlab  : "/font/RobotoSlab.css",
            Rosario     : "/font/Rosario.css",
            UbuntuMono  : "/font/UbuntuMono.css"
        },

        Suffix : {
            about : "简单地活着, 肆意又精彩."
        },
            
        Theme : {
            url  : "https://github.com/first19326/Hexo-LiveForCode",
            name : "Hexo - Live For Code"
        }  
    };
</script>
    <script type="text/javascript" src="/js/index.js"></script>
</body>
</html>